<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kisan Sahayak - Farmer's Helper</title> 
    <script src="https://cdn.tailwindcss.com"></script>
    <style> 
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@500;700;800&family=Noto+Sans+Kannada:wght@500;700;800&family=Noto+Sans+Devanagari:wght@500;700;800&family=Noto+Sans+Telugu:wght@500;700;800&display=swap');
        
        body { 
            font-family: 'Noto Sans', 'Noto Sans Kannada', 'Noto Sans Devanagari', 'Noto Sans Telugu', sans-serif;
            background-color: #F9F8F4;
            color: #1C1C1E;
        } 
        
        .primary-green { color: #2E7D32; }
        .bg-primary-green { background-color: #2E7D32; }
        .secondary-orange { color: #E65100; }
        .bg-secondary-orange { background-color: #E65100; }
        
        .big-thumb-btn {
            min-height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 1.25rem;
            border-radius: 1rem;
            transition: transform 0.2s, background-color 0.2s;
        }
        
        .big-thumb-btn:active {
            transform: scale(0.95);
        }

        .card {
            background: white;
            border: 2px solid #D7CCC8;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        /* Language visibility */
        [lang="kn"], [lang="hi"], [lang="te"] { display: none; }
        
        .lang-kn [lang="en"], .lang-kn [lang="hi"], .lang-kn [lang="te"] { display: none; }
        .lang-kn [lang="kn"] { display: block; }
        
        .lang-hi [lang="en"], .lang-hi [lang="kn"], .lang-hi [lang="te"] { display: none; }
        .lang-hi [lang="hi"] { display: block; }
        
        .lang-te [lang="en"], .lang-te [lang="kn"], .lang-te [lang="hi"] { display: none; }
        .lang-te [lang="te"] { display: block; }

        .lang-en [lang="kn"], .lang-en [lang="hi"], .lang-en [lang="te"] { display: none; }
        .lang-en [lang="en"] { display: block; }
    </style> 
</head> 

<body class="p-4 md:p-8 lang-en"> 

    <!-- Header -->
    <header class="max-w-md mx-auto flex justify-between items-center mb-8">
        <div>
            <h1 class="text-3xl font-extrabold primary-green tracking-tight">
                <span lang="en">Kisan Sahayak</span>
                <span lang="kn">‡≤ï‡≤ø‡≤∏‡≤æ‡≤®‡≥ç ‡≤∏‡≤π‡≤æ‡≤Ø‡≤ï‡≥ç</span>
                <span lang="hi">‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§π‡§æ‡§Ø‡§ï</span>
                <span lang="te">‡∞ï‡∞ø‡∞∏‡∞æ‡∞®‡±ç ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±ç</span>
            </h1>
            <p class="text-stone-600 font-bold text-sm uppercase tracking-wide">
                <span lang="en">Farmer's Helper</span>
                <span lang="kn">‡≤∞‡≥à‡≤§‡≤∞‡≤ø‡≤ó‡≥Ü ‡≤∏‡≤π‡≤æ‡≤Ø</span>
                <span lang="hi">‡§ï‡§ø‡§∏‡§æ‡§® ‡§ï‡•Ä ‡§Æ‡§¶‡§¶</span>
                <span lang="te">‡∞∞‡±à‡∞§‡±Å ‡∞∏‡∞π‡∞æ‡∞Ø‡∞ï‡±Å‡∞°‡±Å</span>
            </p>
        </div>
        <select onchange="changeLanguage(this.value)" id="langSelect" class="bg-stone-200 p-2 rounded-lg font-bold text-lg border-2 border-stone-300 outline-none">
            <option value="en">A</option>
            <option value="kn">‡≤ï</option>
            <option value="hi">‡§Ö</option>
            <option value="te">‡∞Ö</option>
        </select>
    </header>

    <main class="max-w-md mx-auto space-y-8">
        
        <!-- Action Card -->
        <section class="card p-6 text-center space-y-6">
            <div class="problem-statement text-left text-sm text-stone-700 bg-stone-50 p-4 border-l-4 border-green-700 rounded">
                <span lang="en"><b>Goal:</b> Detect crop diseases offline and get treatment tips instantly.</span>
                <span lang="kn"><b>‡≤ó‡≥Å‡≤∞‡≤ø:</b> ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤∞‡≥ã‡≤ó‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤´‡≥ç‚Äå‡≤≤‡≥à‡≤®‡≥ç‚Äå‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤π‡≤ö‡≥ç‡≤ö‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤§‡≤ï‡≥ç‡≤∑‡≤£ ‡≤ö‡≤ø‡≤ï‡≤ø‡≤§‡≥ç‡≤∏‡≥Ü ‡≤™‡≤°‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø.</span>
                <span lang="hi"><b>‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø:</b> ‡§´‡§∏‡§≤ ‡§∞‡•ã‡§ó‡•ã‡§Ç ‡§ï‡§æ ‡§ë‡§´‡§º‡§≤‡§æ‡§á‡§® ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§è‡§Ç ‡§î‡§∞ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§â‡§™‡§ö‡§æ‡§∞ ‡§Ø‡•Å‡§ï‡•ç‡§§‡§ø‡§Ø‡§æ‡§Å ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§</span>
                <span lang="te"><b>‡∞≤‡∞ï‡±ç‡∞∑‡±ç‡∞Ø‡∞Ç:</b> ‡∞™‡∞Ç‡∞ü ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡±Å‡∞≤‡∞®‡±Å ‡∞Ü‡∞´‡±ç‚Äå‡∞≤‡±à‡∞®‡±ç‚Äå‡∞≤‡±ã ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞§‡∞ï‡±ç‡∞∑‡∞£ ‡∞ö‡∞ø‡∞ï‡∞ø‡∞§‡±ç‡∞∏ ‡∞ö‡∞ø‡∞ü‡±ç‡∞ï‡∞æ‡∞≤‡∞®‡±Å ‡∞™‡±ä‡∞Ç‡∞¶‡∞Ç‡∞°‡∞ø.</span>
            </div>

            <form method="post" enctype="multipart/form-data" class="space-y-4"> 
                <div class="relative">
                    <input type="file" name="image" id="fileInput" accept="image/*" required class="hidden" onchange="updateFileName()">
                    <label for="fileInput" class="big-thumb-btn bg-secondary-orange text-white cursor-pointer shadow-lg hover:bg-orange-700 w-full">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <span lang="en" id="fileNameEn">Take Photo / Upload</span>
                        <span lang="kn" id="fileNameKn">‡≤´‡≥ã‡≤ü‡≥ã ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø</span>
                        <span lang="hi" id="fileNameHi">‡§´‡•ã‡§ü‡•ã ‡§≤‡•á‡§Ç / ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</span>
                        <span lang="te" id="fileNameTe">‡∞´‡±ã‡∞ü‡±ã ‡∞§‡±Ä‡∞Ø‡∞Ç‡∞°‡∞ø / ‡∞Ö‡∞™‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø</span>
                    </label>
                </div>
                <button type="submit" class="big-thumb-btn bg-primary-green text-white w-full hover:bg-green-800">
                    <span lang="en">Detect Disease</span>
                    <span lang="kn">‡≤∞‡≥ã‡≤ó ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤π‡≤ö‡≥ç‡≤ö‡≤ø</span>
                    <span lang="hi">‡§∞‡•ã‡§ó ‡§ï‡§æ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§è‡§Ç</span>
                    <span lang="te">‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡∞ø‡∞®‡∞ø ‡∞ó‡±Å‡∞∞‡±ç‡∞§‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø</span>
                </button> 
            </form> 
        </section>

        <!-- Result Card -->
        {% if result %} 
        <section class="card overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500 {{ 'bg-red-50 border-red-200' if 'Healthy' not in result else 'bg-green-50 border-green-200' }}"> 
            <div class="p-6 space-y-4">
                <div class="flex justify-between items-start">
                    <h2 class="text-3xl font-extrabold {{ 'text-red-900' if 'Healthy' not in result else 'text-green-900' }}">
                        <span lang="en">{{ result }}</span>
                        <span lang="kn">{{ kannada.split('‡•§')[0] if '‡•§' in kannada else kannada.split('.')[0] }}</span>
                        <span lang="hi">{{ hindi.split('‡•§')[0] if '‡•§' in hindi else hindi.split('.')[0] }}</span>
                        <span lang="te">{{ telugu.split('.')[0] }}</span>
                    </h2>
                    <button onclick="speakResult()" class="p-3 bg-white rounded-full shadow border-2 border-stone-200 active:scale-95">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 primary-green" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" />
                        </svg>
                    </button>
                </div>
                
                <div class="space-y-4 text-lg font-medium">
                    <div class="bg-white/80 p-4 rounded-xl border border-stone-200">
                        <p class="text-stone-600 text-sm font-bold uppercase tracking-wider mb-1">üíä <span lang="en">Treatment</span><span lang="kn">‡≤ö‡≤ø‡≤ï‡≤ø‡≤§‡≥ç‡≤∏‡≥Ü</span><span lang="hi">‡§â‡§™‡§ö‡§æ‡§∞</span><span lang="te">‡∞ö‡∞ø‡∞ï‡∞ø‡∞§‡±ç‡∞∏</span></p>
                        <p class="text-stone-900">
                            <span lang="en">{{ treatment }}</span>
                            <span lang="kn">{{ kannada }}</span>
                            <span lang="hi">{{ hindi }}</span>
                            <span lang="te">{{ telugu }}</span>
                        </p>
                    </div>
                    <div class="bg-white/80 p-4 rounded-xl border border-stone-200">
                        <p class="text-stone-600 text-sm font-bold uppercase tracking-wider mb-1">üõ° <span lang="en">Prevention</span><span lang="kn">‡≤Æ‡≥Å‡≤®‡≥ç‡≤®‡≥Ü‡≤ö‡≥ç‡≤ö‡≤∞‡≤ø‡≤ï‡≥Ü</span><span lang="hi">‡§®‡§ø‡§µ‡§æ‡§∞‡§£</span><span lang="te">‡∞®‡∞ø‡∞µ‡∞æ‡∞∞‡∞£</span></p>
                        <p class="text-stone-900">
                            <span lang="en">{{ prevention }}</span>
                            <span lang="kn">{{ kannada }}</span>
                            <span lang="hi">{{ hindi }}</span>
                            <span lang="te">{{ telugu }}</span>
                        </p>
                    </div>
                </div>
            </div>
        </section> 
        {% endif %} 

        <!-- History Card -->
        <section class="card p-6">
            <h3 class="text-xl font-extrabold mb-4 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2 text-stone-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span lang="en">Diagnosis History</span>
                <span lang="kn">‡≤π‡≤ø‡≤Ç‡≤¶‡≤ø‡≤® ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤ó‡≤≥‡≥Å</span>
                <span lang="hi">‡§®‡§ø‡§¶‡§æ‡§® ‡§á‡§§‡§ø‡§π‡§æ‡§∏</span>
                <span lang="te">‡∞∞‡±ã‡∞ó ‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞£ ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞</span>
            </h3>
            <div class="space-y-3">
                {% for item in history %}
                <div class="flex items-center p-3 bg-stone-50 rounded-lg border border-stone-200">
                    <div class="flex-1">
                        <p class="font-bold text-stone-900">
                            <span lang="en">{{ item.disease }}</span>
                            <span lang="kn">{{ item.kannada.split('‡•§')[0] if '‡•§' in item.kannada else item.kannada.split('.')[0] }}</span>
                            <span lang="hi">{{ item.hindi.split('‡•§')[0] if '‡•§' in item.hindi else item.hindi.split('.')[0] }}</span>
                            <span lang="te">{{ item.telugu.split('.')[0] }}</span>
                        </p>
                        <p class="text-xs text-stone-500">{{ item.date }}</p>
                    </div>
                    <div class="w-3 h-3 rounded-full {{ 'bg-red-500' if 'Healthy' not in item.disease else 'bg-green-500' }}"></div>
                </div>
                {% endfor %}
                {% if not history %}
                <p class="text-stone-500 text-center py-4 italic">
                    <span lang="en">No history yet</span>
                    <span lang="kn">‡≤á‡≤®‡≥ç‡≤®‡≥Ç ‡≤Ø‡≤æ‡≤µ‡≥Å‡≤¶‡≥á ‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø ‡≤á‡≤≤‡≥ç‡≤≤</span>
                    <span lang="hi">‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§á‡§§‡§ø‡§π‡§æ‡§∏ ‡§®‡§π‡•Ä‡§Ç</span>
                    <span lang="te">‡∞á‡∞Ç‡∞ï‡∞æ ‡∞ö‡∞∞‡∞ø‡∞§‡±ç‡∞∞ ‡∞≤‡±á‡∞¶‡±Å</span>
                </p>
                {% endif %}
            </div>
        </section>

        <!-- Crop Library Card -->
        <section class="card p-6">
            <h3 class="text-xl font-extrabold mb-4">
                <span lang="en">Supported Crops</span>
                <span lang="kn">‡≤¨‡≥Ü‡≤Ç‡≤¨‡≤≤‡≤ø‡≤§ ‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤ó‡≤≥‡≥Å</span>
                <span lang="hi">‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§´‡§∏‡§≤‡•á‡§Ç</span>
                <span lang="te">‡∞Æ‡∞¶‡±ç‡∞¶‡∞§‡±Å ‡∞â‡∞®‡±ç‡∞® ‡∞™‡∞Ç‡∞ü‡∞≤‡±Å</span>
            </h3>
            <div class="grid grid-cols-2 gap-3">
                <div class="p-3 bg-stone-50 rounded-xl text-center border-2 border-stone-100">
                    <span class="text-3xl">ü•î</span>
                    <p class="font-bold mt-1">
                        <span lang="en">Potato</span>
                        <span lang="kn">‡≤Ü‡≤≤‡≥Ç‡≤ó‡≤°‡≥ç‡≤°‡≥Ü</span>
                        <span lang="hi">‡§Ü‡§≤‡•Ç</span>
                        <span lang="te">‡∞¨‡∞Ç‡∞ó‡∞æ‡∞≥‡∞¶‡±Å‡∞Ç‡∞™</span>
                    </p>
                </div>
                <div class="p-3 bg-stone-50 rounded-xl text-center border-2 border-stone-100">
                    <span class="text-3xl">üçÖ</span>
                    <p class="font-bold mt-1">
                        <span lang="en">Tomato</span>
                        <span lang="kn">‡≤ü‡≥ä‡≤Æ‡≥ç‡≤Ø‡≤æ‡≤ü‡≥ä</span>
                        <span lang="hi">‡§ü‡§Æ‡§æ‡§ü‡§∞</span>
                        <span lang="te">‡∞ü‡±ä‡∞Æ‡∞æ‡∞ü‡±ã</span>
                    </p>
                </div>
            </div>
        </section>

    </main>

    <footer class="max-w-md mx-auto mt-8 text-center text-stone-400 text-sm font-bold uppercase tracking-widest pb-8">
        Kisan Sahayak v1.0 ‚Ä¢ Offline AI
    </footer>

    <script>
        function changeLanguage(lang) {
            document.body.classList.remove('lang-en', 'lang-kn', 'lang-hi', 'lang-te');
            document.body.classList.add('lang-' + lang);
            localStorage.setItem('kisan-lang', lang);
            document.getElementById('langSelect').value = lang;
        }

        // Initialize language
        const savedLang = localStorage.getItem('kisan-lang') || 'en';
        changeLanguage(savedLang);

        function updateFileName() {
            const input = document.getElementById('fileInput');
            const name = input.files[0] ? input.files[0].name : 'Selected';
            document.getElementById('fileNameEn').textContent = name;
            document.getElementById('fileNameKn').textContent = '‡≤Ü‡≤Ø‡≥ç‡≤ï‡≥Ü‡≤Ø‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü';
            document.getElementById('fileNameHi').textContent = '‡§ö‡§Ø‡§®‡§ø‡§§';
            document.getElementById('fileNameTe').textContent = '‡∞é‡∞Ç‡∞™‡∞ø‡∞ï ‡∞ö‡±á‡∞Ø‡∞¨‡∞°‡∞ø‡∞Ç‡∞¶‡∞ø';
        }

        function speakResult() {
            const lang = localStorage.getItem('kisan-lang') || 'en';
            let text = "";
            let voiceLang = 'en-US';
            
            const langMap = {
                'en': 'en-US',
                'kn': 'kn-IN',
                'hi': 'hi-IN',
                'te': 'te-IN'
            };
            voiceLang = langMap[lang] || 'en-US';

            const activeContainer = document.querySelector(`[lang="${lang}"] h2`)?.closest('section');
            if (activeContainer) {
                text = activeContainer.querySelector(`[lang="${lang}"] h2`)?.textContent || "";
                text += ". " + activeContainer.querySelector(`[lang="${lang}"] .text-stone-900`)?.textContent || "";
            }

            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel(); // Stop current speech
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = voiceLang;
                window.speechSynthesis.speak(utterance);
            }
        }
    </script>
</body> 
</html> 
